<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Schedules</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="d-flex">

  <!-- Sidebar -->
  <div id="sidebar"></div>

  <div class="container-fluid p-4">
    <h2>Schedules</h2>
    <form id="scheduleForm" class="row g-3">
      <div class="col-md-3"><input type="text" name="course_id" placeholder="Course ID" class="form-control" required></div>
      <div class="col-md-2">
        <select name="day_of_week" class="form-select">
          <option>Monday</option><option>Tuesday</option>...
        </select>
      </div>
      <div class="col-md-2"><input type="time" name="start_time" class="form-control"></div>
      <div class="col-md-2"><input type="time" name="end_time" class="form-control"></div>
      <div class="col-md-2"><select name="room_id" id="roomSelect" class="form-select"></select></div>
      <div class="col-md-1"><button type="submit" class="btn btn-primary">Add</button></div>
    </form>

    <table class="table mt-3" id="scheduleTable">
      <thead><tr><th>Course</th><th>Day</th><th>Time</th><th>Room</th><th>Action</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

<script>
fetch("navbar.html")
    .then(res => res.text())
    .then(html => { document.getElementById("sidebar").innerHTML = html; });


fetch("http://18.140.43.246:5000/api/schedules") // Get rooms from Flask
  .then(res => res.json())
  .then(devices => {
    let sel = document.getElementById("roomSelect");
    devices.forEach(d => {
      let opt = document.createElement("option");
      opt.value = d.device_id;
      opt.innerText = d.room_name;
      sel.appendChild(opt);
    });
  });
</script>
</body>
</html>
