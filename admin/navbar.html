<!-- navbar.html -->
<aside id="sidebar" class="d-flex flex-column flex-shrink-0 text-white" style="width: 280px;">
  <!-- Logo / Title -->
  <div class="sidebar-header p-4 border-bottom border-secondary border-opacity-25">
    <h4 class="mb-0 fw-bold d-flex align-items-center gap-2">
      <span>VeriPass</span>
    </h4>
    <small class="text-white-50">VeriPass Management System</small>
  </div>

  <!-- Navigation -->
  <ul class="nav nav-pills flex-column mb-auto px-3 pt-3">
    <!-- Admin Links -->
    <li class="nav-item admin-only">
      <a href="admin_dashboard.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-speedometer2"></i> Overview
      </a>
    </li>
    <li class="admin-only">
      <a href="logs.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-journal-text"></i> Logs
      </a>
    </li>
    <li class="admin-only">
      <a href="enrollment.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-person-check"></i> Enrollment
      </a>
    </li>
    <li class="admin-only">
      <a href="courses.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-book"></i> Courses
      </a>
    </li>
    <li class="admin-only">
      <a href="schedules.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-calendar3"></i> Schedule
      </a>
    </li>
    <li class="admin-only">
      <a href="students.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-people"></i> Students
      </a>
    </li>
    <li class="admin-only">
      <a href="lecturers.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-person-badge"></i> Lecturers
      </a>
    </li>

    <!-- Divider -->
    <li class="my-3 admin-only"><hr class="border-secondary border-opacity-50"></li>

    <!-- Lecturer Links -->
    <li class="nav-item lecturer-only">
      <a href="lecturer_dashboard.html" class="nav-link d-flex align-items-center gap-3">
        <i class="bi bi-easel2"></i> My Dashboard
      </a>
    </li>
  </ul>

  <!-- User Info & Logout -->
  <div class="sidebar-footer p-3 border-top border-secondary border-opacity-25">
    <div class="d-flex align-items-center gap-3 mb-3">
    <button type="button" class="btn btn-outline-light w-100 d-flex align-items-center justify-content-center gap-2"
            onclick="logoutUser()">
      <i class="bi bi-box-arrow-right"></i> Logout
    </button>
  </div>
</aside>

<!-- Bootstrap Icons CDN (if not already included in your main layout) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<script>
function initNavbar() {
  const role = localStorage.getItem("role");

  // Redirect if not logged in
  if (!role) {
    const redirectPath = window.location.pathname.includes("/lecturer/") ? "../index.html" : "index.html";
    window.location.href = redirectPath;
    return;
  }

  console.log("Navbar initialized for role:", role);

  // Show/hide role-based items
  document.querySelectorAll(".admin-only").forEach(el => {
    el.style.display = role === "admin" ? "block" : "none";
  });
  document.querySelectorAll(".lecturer-only").forEach(el => {
    el.style.display = role === "lecturer" ? "block" : "none";
  });

  // Highlight active link
  const currentPage = window.location.pathname.split("/").pop();
  document.querySelectorAll("#sidebar a.nav-link").forEach(link => {
    link.classList.remove("active");
    if (link.getAttribute("href") === currentPage || 
        (currentPage === "" && link.getAttribute("href").includes("dashboard"))) {
      link.classList.add("active");
    }
  });

}

// Logout function
function logoutUser() {
  console.log("Logging out...");
  localStorage.clear();
  sessionStorage.clear();
  const redirectPath = window.location.pathname.includes("/lecturer/") ? "../index.html" : "index.html";
  window.location.href = redirectPath;
}

// Run on load
document.addEventListener("DOMContentLoaded", initNavbar);
</script>